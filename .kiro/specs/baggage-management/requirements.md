# 要件定義書

## 概要

忘れ物防止アプリは、RFIDタグを使用して持ち物を管理し、ユーザーが外出時に必要なアイテムを忘れないようサポートするシステムです。天気情報に基づく提案機能やテンプレート機能により、日常的な持ち物管理を効率化します。

## 用語集

- **システム**: 忘れ物防止アプリケーション
- **ユーザー**: アプリケーションを使用する個人
- **持ち物セット**: 特定の日付または用途に関連付けられた持ち物のセット
- **アイテム**: 個別の持ち物（名前、タグID、画像を持つ）
- **テンプレート**: 再利用可能な持ち物セットの設定
- **RFIDタグ**: 各アイテムに関連付けられた識別タグ
- **天気API**: 天気情報を提供する外部サービス
- **バックエンド**: フレームワークなしの生のPHPで実装されるサーバーサイド処理
- **データベース**: SQLiteを使用したローカルデータストレージ

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、トップ画面で今日の持ち物を確認したい。そうすることで、今日持参すべきものを素早く把握できる。

#### 受け入れ基準

1. ユーザーがトップ画面にアクセスした時、システムは今日の日付に関連付けられた全てのアイテムを表示する
2. 今日の持ち物が登録されていない時、システムは空の状態メッセージを表示する
3. 持ち物アイテムを表示する時、システムはアイテム名と関連する画像を表示する
4. ユーザーがトップ画面を表示している時、システムはRFIDスキャン実行ボタンを提供する
5. 今日の天気が雨の時、システムは持ち物リストに傘の追加を提案する

### 要件2

**ユーザーストーリー:** ユーザーとして、日付を選択してアイテムを選んで持ち物を登録したい。そうすることで、特定の日のための持ち物を準備できる。

#### 受け入れ基準

1. ユーザーが持ち物登録画面にアクセスした時、システムは日付選択インターフェースを表示する
2. ユーザーが日付を選択した時、システムは選択可能なアイテムを表示する
3. ユーザーがアイテムを選択して確定した時、システムは選択された日付とアイテムで持ち物セットレコードを作成する
4. 持ち物セットを作成する時、システムは持ち物セットを現在のユーザーに関連付ける
5. 持ち物登録が完了した時、システムはトップ画面にリダイレクトする

### 要件3

**ユーザーストーリー:** ユーザーとして、再利用可能なテンプレートを作成したい。そうすることで、よく使う持ち物の組み合わせを素早く設定できる。

#### 受け入れ基準

1. ユーザーがテンプレート作成にアクセスした時、システムは選択可能なアイテムを表示する
2. ユーザーがアイテムを選択してテンプレート名を入力した時、システムはテンプレートレコードを作成する
3. テンプレートを作成する時、システムは特定の日付なしでテンプレートを保存する
4. テンプレートが作成された時、システムはそれを現在のユーザーに関連付ける
5. テンプレート作成が完了した時、システムは作成成功を確認する

### 要件4

**ユーザーストーリー:** ユーザーとして、既存のテンプレートから選択したい。そうすることで、事前設定された持ち物セットを特定の日付に素早く適用できる。

#### 受け入れ基準

1. ユーザーがテンプレート選択にアクセスした時、システムはユーザーの利用可能な全てのテンプレートを表示する
2. ユーザーがテンプレートを選択した時、システムは関連するアイテムを含むテンプレート詳細を表示する
3. ユーザーがテンプレート選択を確定した時、システムは日付選択を促す
4. 日付が選択された時、システムはテンプレートのアイテムを使用して新しい持ち物セットレコードを作成する
5. テンプレート適用が完了した時、システムはトップ画面にリダイレクトする

### 要件5

**ユーザーストーリー:** ユーザーとして、RFIDタグをスキャンして結果を確認したい。そうすることで、持参しているアイテムを確認できる。

#### 受け入れ基準

1. ユーザーがRFIDスキャンを開始した時、システムはRFIDリーダーインターフェースを有効化する
2. RFIDタグがスキャンされた時、システムは関連するアイテムを識別する
3. スキャン結果が利用可能な時、システムはスキャンされたアイテムとその詳細を表示する
4. 今日の持ち物と比較する時、システムは不足しているアイテムをハイライトする
5. スキャンが完了した時、システムはトップ画面に戻るオプションを提供する

### 要件6

**ユーザーストーリー:** ユーザーとして、アイテムにRFIDタグIDを登録したい。そうすることで、物理的なタグをデジタルアイテムレコードに関連付けできる。

#### 受け入れ基準

1. ユーザーがタグ登録にアクセスした時、システムはタグが割り当てられていない利用可能なアイテムを表示する
2. ユーザーがアイテムを選択した時、システムはRFIDタグスキャンまたは手動入力を促す
3. タグIDが提供された時、システムはタグが既に割り当てられていないことを検証する
4. タグ割り当てが確定された時、システムはタグIDでアイテムレコードを更新する
5. タグ登録が完了した時、システムは割り当て成功を確認する

### 要件7

**ユーザーストーリー:** ユーザーとして、個人のアイテムを管理したい。そうすることで、持ち物計画のための正確な在庫を維持できる。

#### 受け入れ基準

1. ユーザーが新しいアイテムを追加する時、システムはアイテム名と任意の画像を要求する
2. アイテム情報が提供された時、システムはユーザーに関連付けられたアイテムレコードを作成する
3. アイテムが作成された時、システムは即座にタグID割り当てを許可する
4. アイテムが表示される時、システムは名前、画像、タグ割り当て状況を表示する
5. アイテムが更新された時、システムは既存の持ち物セット関連付けを保持する

### 要件8

**ユーザーストーリー:** ユーザーとして、天気に基づく提案を受けたい。そうすることで、天気に適したアイテムを思い出すことができる。

#### 受け入れ基準

1. システムが天気状況をチェックする時、システムはユーザーの位置の現在の天気を照会する
2. 天気データが雨を示す時、システムは今日の持ち物に傘の追加を提案する
3. 天気提案が行われる時、システムはトップ画面で目立つように表示する
4. ユーザーが天気提案を受け入れる時、システムは提案されたアイテムを今日の持ち物に追加する
5. 天気データが利用できない時、システムは提案なしで通常の動作を続行する

### 要件9

**ユーザーストーリー:** 開発者として、フレームワークなしの生のPHPでバックエンドを実装したい。そうすることで、軽量で依存関係のないシステムを構築できる。

#### 受け入れ基準

1. バックエンド処理を実装する時、システムはフレームワークを使用せずに生のPHPで実装する
2. データベース操作を行う時、システムはSQLiteデータベースを使用する
3. HTTPリクエストを処理する時、システムは生のPHPの$_GET、$_POST、$_SESSIONを使用する
4. データベース接続を確立する時、システムはPDOを使用してSQLiteに接続する
5. アプリケーション構造を設計する時、システムはドメイン駆動設計（DDD）パターンに基づいて整理する

### 要件10

**ユーザーストーリー:** 開発者として、シンプルなフロントエンド技術スタックを使用したい。そうすることで、軽量で保守しやすいユーザーインターフェースを構築できる。

#### 受け入れ基準

1. ユーザーインターフェースを実装する時、システムは基本的なHTML、CSS、JavaScriptを使用する
2. フロントエンドフレームワークを選択する時、システムは外部フレームワークを使用しない
3. スタイリングを適用する時、システムはTailwind CSSをCDN経由で使用する
4. インタラクティブ機能を実装する時、システムはバニラJavaScriptを使用する
5. ページ構造を作成する時、システムはセマンティックHTMLを使用する